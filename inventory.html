<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BTLTech · Parts & Accessories Inventory (2019–2025)</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root{
      --bg:#f5f7fa; --panel:#ffffff; --text:#0f172a; --muted:#64748b; --line:#e2e8f0; --primary:#2563eb;
      --ok:#10b981; --warn:#f59e0b; --danger:#ef4444; --chip:#eef2ff;
    }
    *{ box-sizing:border-box; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, 'Helvetica Neue', Arial, sans-serif; }
    body{ margin:0; background:linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); color:var(--text); padding:16px; }
    .wrap{ max-width:1200px; margin:0 auto; }
    header{ background:#1f2937; color:#fff; padding:16px; border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,.12); text-align:center; }
    header h1{ margin:0 0 6px 0; font-size:24px; }
    header p{ margin:0; color:#cbd5e1; font-size:13px; }
    .controls{ display:flex; gap:12px; align-items:center; justify-content:space-between; margin:14px 0; flex-wrap:wrap; }
    .search{ position:relative; flex:1; min-width:280px; }
    .search input{ width:100%; padding:12px 16px 12px 40px; border-radius:999px; border:1px solid var(--line); background:#fff; box-shadow:0 2px 10px rgba(0,0,0,.06); }
    .search i{ position:absolute; left:12px; top:50%; transform:translateY(-50%); color:#94a3b8; }
    .btn{ padding:10px 14px; border:none; border-radius:999px; background:var(--primary); color:#fff; font-weight:700; cursor:pointer; box-shadow:0 2px 10px rgba(37,99,235,.25); }
    .btn-ghost{ background:#e2e8f0; color:#0f172a; box-shadow:none; }
    .btn-danger{ background:#ef4444; }
    .chips{ display:flex; gap:8px; flex-wrap:wrap; }
    .chip{ background:var(--chip); border:1px solid var(--line); padding:8px 12px; border-radius:999px; cursor:pointer; font-weight:600; }
    .chip.active{ background:#1f2937; color:#fff; border-color:transparent; }
    .panel{ background:#fff; border:1px solid var(--line); border-radius:12px; overflow:auto; box-shadow:0 6px 20px rgba(0,0,0,.08); }
    table{ width:100%; border-collapse:collapse; min-width:840px; }
    thead{ background:#1f2937; color:#fff; }
    th,td{ padding:12px 14px; text-align:left; border-bottom:1px solid var(--line); font-size:13px; }
    th{ cursor:pointer; user-select:none; }
    tr:hover td{ background:#f8fafc; }
    .kpi{ display:grid; grid-template-columns:repeat(4,1fr); gap:12px; margin-top:14px; }
    .card{ background:#fff; border:1px solid var(--line); border-radius:12px; padding:14px; text-align:center; box-shadow:0 6px 20px rgba(0,0,0,.06); }
    .card h4{ margin:0; color:var(--muted); font-weight:600; font-size:12px; }
    .card .num{ margin-top:6px; font-size:20px; font-weight:800; }
    .stock-low{ color:var(--danger); font-weight:800; }
    .stock-mid{ color:var(--warn); font-weight:700; }
    .stock-high{ color:var(--ok); font-weight:700; }
    .category{ display:inline-block; padding:4px 10px; border-radius:999px; font-weight:700; font-size:12px; border:1px solid var(--line); }
    .c-screen{ background:#fff7ed; color:#9a3412; }
    .c-battery{ background:#eff6ff; color:#1d4ed8; }
    .c-cover{ background:#f5f3ff; color:#6d28d9; }
    .c-charging{ background:#ecfeff; color:#0e7490; }
    .c-flex{ background:#fef2f2; color:#b91c1c; }
    .c-accessory{ background:#fdf2f8; color:#be185d; }
    .right{ text-align:right; }
    .toolbar{ display:flex; gap:8px; flex-wrap:wrap; }
    input[type='number']{ width:90px; }
    @media (max-width: 800px){ .kpi{ grid-template-columns:1fr 1fr; } }
  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>
  <div class="wrap">
    <header>
      <h1>BTLTech Inventory</h1>
      <p>Popular phone parts and accessories (2019–2025) with live inventory</p>
    </header>
    <div class="controls">
      <div class="search"><i class="fas fa-search"></i><input id="q" placeholder="Search part, model, category…"></div>
      <div class="toolbar">
        <button class="btn" id="addItem"><i class="fas fa-plus"></i>&nbsp;Add item</button>
        <button class="btn-ghost" id="quickAdd"><i class="fas fa-bolt"></i>&nbsp;Quick add</button>
        <button class="btn-ghost" id="exportJson"><i class="fas fa-file-export"></i>&nbsp;Export JSON</button>
        <button class="btn-ghost" id="importJsonBtn"><i class="fas fa-file-import"></i>&nbsp;Import JSON</button>
        <input id="importJson" type="file" accept="application/json" style="display:none">
        <button class="btn-danger" id="clearAll"><i class="fas fa-broom"></i>&nbsp;Clear (local)</button>
      </div>
    </div>

    <div class="chips" id="chips">
      <div class="chip active" data-filter="all">All Parts</div>
      <div class="chip" data-filter="LCD Screen">Screens</div>
      <div class="chip" data-filter="Battery">Batteries</div>
      <div class="chip" data-filter="Back Cover">Back covers</div>
      <div class="chip" data-filter="Charging Port">Charging ports</div>
      <div class="chip" data-filter="Flex Cable">Flex cables</div>
      <div class="chip" data-filter="Accessory">Accessories</div>
      <div class="chip" data-type="Mobile">Mobile</div>
      <div class="chip" data-type="Tablet">Tablet</div>
      <div class="chip" data-type="Laptop">Laptop</div>
      <div class="chip" data-type="Watch">Watch</div>
      <div class="chip" data-type="Accessory">Accessory</div>
    </div>

    <div class="panel" style="margin-top:10px;">
      <table>
        <thead>
          <tr>
            <th data-col="name">Part Name <i class="fas fa-sort"></i></th>
            <th data-col="category">Part Category <i class="fas fa-sort"></i></th>
            <th data-col="deviceType">Device Type <i class="fas fa-sort"></i></th>
            <th>Compatible Models</th>
            <th data-col="stock" class="right">Stock</th>
            <th class="right">Actions</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>

    <div class="kpi">
      <div class="card"><h4>Total Units</h4><div class="num" id="kpiUnits">0</div></div>
      <div class="card"><h4>Low Stock (&lt;10)</h4><div class="num" id="kpiLow">0</div></div>
      <div class="card"><h4>Categories</h4><div class="num" id="kpiCats">0</div></div>
      <div class="card"><h4>SKUs</h4><div class="num" id="kpiSkus">0</div></div>
    </div>
  </div>

  <script>
  "use strict";
  // Storage keys
  var KEY='btl_inv_v1';

  // Currency removed (no prices displayed)
  function id(x){ return document.getElementById(x); }

  // Seed inventory (popular 2019–2025, expanded)
  var seed=[
    // Apple iPhone series (2019–2025)
    {id:1,name:'iPhone 11 LCD Screen',category:'LCD Screen',models:'iPhone 11',year:2019,stock:18},
    {id:2,name:'iPhone 11 Battery',category:'Battery',models:'iPhone 11',year:2019,stock:22},
    {id:3,name:'iPhone 11 Charging Port',category:'Charging Port',models:'iPhone 11',year:2019,stock:12},
    {id:4,name:'iPhone 11 Back Glass',category:'Back Cover',models:'iPhone 11',year:2019,stock:10},
    {id:5,name:'iPhone 11 Pro LCD',category:'LCD Screen',models:'iPhone 11 Pro',year:2019,stock:9},
    {id:6,name:'iPhone 11 Pro Max Battery',category:'Battery',models:'iPhone 11 Pro Max',year:2019,stock:8},

    {id:7,name:'iPhone 12 LCD Screen',category:'LCD Screen',models:'iPhone 12/12 mini',year:2020,stock:16},
    {id:8,name:'iPhone 12 Battery',category:'Battery',models:'iPhone 12/12 mini',year:2020,stock:20},
    {id:9,name:'iPhone 12 Charging Port',category:'Charging Port',models:'iPhone 12/12 mini',year:2020,stock:12},
    {id:10,name:'iPhone 12 Back Glass',category:'Back Cover',models:'iPhone 12',year:2020,stock:14},

    {id:11,name:'iPhone 13 LCD Screen',category:'LCD Screen',models:'iPhone 13/13 mini',year:2021,stock:19},
    {id:12,name:'iPhone 13 Battery',category:'Battery',models:'iPhone 13/13 mini',year:2021,stock:26},
    {id:13,name:'iPhone 13 Charging Flex',category:'Flex Cable',models:'iPhone 13',year:2021,stock:17},
    {id:14,name:'iPhone 13 Pro Back Glass',category:'Back Cover',models:'iPhone 13 Pro',year:2021,stock:14},

    {id:15,name:'iPhone 14 LCD Screen',category:'LCD Screen',models:'iPhone 14',year:2022,stock:13},
    {id:16,name:'iPhone 14 Battery',category:'Battery',models:'iPhone 14',year:2022,stock:22},
    {id:17,name:'iPhone 14 Back Cover',category:'Back Cover',models:'iPhone 14',year:2022,stock:19},
    {id:18,name:'iPhone 14 Pro Max Battery',category:'Battery',models:'iPhone 14 Pro Max',year:2022,stock:22},

    {id:19,name:'iPhone 15 Flex Cable',category:'Flex Cable',models:'iPhone 15',year:2023,stock:8},
    {id:20,name:'iPhone 15 LCD Screen',category:'LCD Screen',models:'iPhone 15',year:2023,stock:7},

    {id:21,name:'iPhone 16 Pro Max LCD',category:'LCD Screen',models:'iPhone 16 Pro Max',year:2024,stock:5},
    {id:22,name:'iPhone 16 Battery',category:'Battery',models:'iPhone 16/16 Plus',year:2024,stock:11},

    {id:23,name:'iPhone 17 Pro Max Battery',category:'Battery',models:'iPhone 17 Pro Max',year:2025,stock:6},
    {id:24,name:'iPhone 17 LCD Screen',category:'LCD Screen',models:'iPhone 17/17 Plus',year:2025,stock:4},

    // Samsung Galaxy S/Note/Z (2020–2025)
    {id:25,name:'Galaxy S20 Screen',category:'LCD Screen',models:'Galaxy S20/S20+/S20 Ultra',year:2020,stock:10},
    {id:26,name:'Galaxy S20 Battery',category:'Battery',models:'Galaxy S20/S20+',year:2020,stock:15},
    {id:27,name:'Galaxy S21 Battery',category:'Battery',models:'S21/S21+/S21 Ultra',year:2021,stock:31},
    {id:28,name:'Galaxy S21 Charging Port',category:'Charging Port',models:'S21/S21+',year:2021,stock:12},
    {id:29,name:'Galaxy S22 Ultra LCD',category:'LCD Screen',models:'Galaxy S22 Ultra',year:2022,stock:15},
    {id:30,name:'Galaxy S23 Back Cover',category:'Back Cover',models:'Galaxy S23',year:2023,stock:18},
    {id:31,name:'Galaxy S24+ Battery',category:'Battery',models:'Galaxy S24+',year:2024,stock:20},
    {id:32,name:'Galaxy S25 Ultra LCD',category:'LCD Screen',models:'Galaxy S25 Ultra',year:2025,stock:3},
    {id:33,name:'Galaxy Z Flip4 Screen',category:'LCD Screen',models:'Galaxy Z Flip4',year:2022,stock:6},
    {id:34,name:'Galaxy Z Flip5 Screen',category:'LCD Screen',models:'Galaxy Z Flip5',year:2023,stock:7},

    // Google Pixel (2019–2025)
    {id:35,name:'Pixel 4 Screen',category:'LCD Screen',models:'Pixel 4',year:2019,stock:9},
    {id:36,name:'Pixel 5 Battery',category:'Battery',models:'Pixel 5',year:2020,stock:13},
    {id:37,name:'Pixel 6 Back Cover',category:'Back Cover',models:'Pixel 6',year:2021,stock:18},
    {id:38,name:'Pixel 7 Screen',category:'LCD Screen',models:'Pixel 7/7 Pro',year:2022,stock:8},
    {id:39,name:'Pixel 8 Charging Port',category:'Charging Port',models:'Pixel 8',year:2023,stock:11},
    {id:40,name:'Pixel 9 Battery',category:'Battery',models:'Pixel 9',year:2024,stock:10},

    // Huawei (2019–2024)
    {id:41,name:'Huawei P30 Screen',category:'LCD Screen',models:'P30/P30 Pro',year:2019,stock:10},
    {id:42,name:'Huawei P40 Battery',category:'Battery',models:'P40/P40 Pro',year:2020,stock:12},
    {id:43,name:'Huawei P50 Charging Port',category:'Charging Port',models:'P50/P50 Pro',year:2021,stock:9},
    {id:44,name:'Huawei P60 Screen',category:'LCD Screen',models:'P60/P60 Pro',year:2023,stock:6},

    // OnePlus (2019–2025)
    {id:45,name:'OnePlus 8 Screen',category:'LCD Screen',models:'OnePlus 8/8 Pro',year:2020,stock:10},
    {id:46,name:'OnePlus 9 Battery',category:'Battery',models:'OnePlus 9/9 Pro',year:2021,stock:12},
    {id:47,name:'OnePlus 10 Charging Port',category:'Charging Port',models:'OnePlus 10 Pro/10T',year:2022,stock:9},
    {id:48,name:'OnePlus 11 Screen',category:'LCD Screen',models:'OnePlus 11',year:2023,stock:7},
    {id:49,name:'OnePlus 12 Battery',category:'Battery',models:'OnePlus 12',year:2024,stock:8},

    // Xiaomi / Redmi / POCO
    {id:50,name:'Xiaomi 11 Screen',category:'LCD Screen',models:'Mi 11/11 Pro/11 Ultra',year:2021,stock:9},
    {id:51,name:'Xiaomi 12 Battery',category:'Battery',models:'Xiaomi 12/12 Pro',year:2022,stock:10},
    {id:52,name:'Xiaomi 13 Screen',category:'LCD Screen',models:'Xiaomi 13/13 Pro',year:2023,stock:7},
    {id:53,name:'Redmi Note 12 Charging Port',category:'Charging Port',models:'Redmi Note 12',year:2022,stock:15},
    {id:54,name:'POCO X6 Pro Back Cover',category:'Back Cover',models:'POCO X6 Pro',year:2024,stock:8},

    // Motorola / Others
    {id:55,name:'Moto G22 Screen',category:'LCD Screen',models:'XT2231-5 / G22',year:2022,stock:9},
    {id:56,name:'Nokia G60 Battery',category:'Battery',models:'Nokia G60',year:2022,stock:10},
    {id:57,name:'Sony Xperia 1 V Screen',category:'LCD Screen',models:'Xperia 1 V',year:2023,stock:5},

    // Tablets / Watches essentials
    {id:58,name:'iPad 10 Gen Charging Port',category:'Charging Port',models:'iPad 10th Gen',year:2022,stock:7},
    {id:59,name:'iPad Air 2024 Battery',category:'Battery',models:'iPad Air (2024)',year:2024,stock:6},
    {id:60,name:'Apple Watch Series 7 Battery',category:'Battery',models:'A2477',year:2021,stock:6},

    // Accessories typical in shop
    {id:61,name:'USB-C Cable (1m)',category:'Accessory',models:'USB-C devices',year:2024,stock:48},
    {id:62,name:'Lightning to USB-C Cable (1m)',category:'Accessory',models:'iPhone/iPad',year:2023,stock:35},
    {id:63,name:'20W USB-C Wall Charger',category:'Accessory',models:'Universal',year:2023,stock:22},
    {id:64,name:'Wireless Charging Pad',category:'Accessory',models:'Qi devices',year:2023,stock:30},
    {id:65,name:'Screen Protector (3-Pack)',category:'Accessory',models:'Various',year:2024,stock:65},
    {id:66,name:'Tempered Glass iPhone 14',category:'Accessory',models:'iPhone 14',year:2022,stock:40},
    {id:67,name:'Soft TPU Case iPhone 15',category:'Accessory',models:'iPhone 15',year:2023,stock:28},
    {id:68,name:'USB-C to 3.5mm Adapter',category:'Accessory',models:'USB-C phones',year:2024,stock:20},

    // Samsung Galaxy A series (2019–2024)
    {id:69,name:'Galaxy A10 Screen',category:'LCD Screen',models:'Galaxy A10',year:2019,stock:10},
    {id:70,name:'Galaxy A10 Battery',category:'Battery',models:'Galaxy A10',year:2019,stock:14},
    {id:71,name:'Galaxy A20 Screen',category:'LCD Screen',models:'Galaxy A20',year:2019,stock:9},
    {id:72,name:'Galaxy A20 Battery',category:'Battery',models:'Galaxy A20',year:2019,stock:12},
    {id:73,name:'Galaxy A30 Screen',category:'LCD Screen',models:'Galaxy A30',year:2019,stock:9},
    {id:74,name:'Galaxy A30 Battery',category:'Battery',models:'Galaxy A30',year:2019,stock:12},
    {id:75,name:'Galaxy A50 Screen',category:'LCD Screen',models:'Galaxy A50',year:2019,stock:11},
    {id:76,name:'Galaxy A50 Battery',category:'Battery',models:'Galaxy A50',year:2019,stock:14},
    {id:77,name:'Galaxy A70 Screen',category:'LCD Screen',models:'Galaxy A70',year:2019,stock:8},
    {id:78,name:'Galaxy A70 Battery',category:'Battery',models:'Galaxy A70',year:2019,stock:10},

    {id:79,name:'Galaxy A11 Screen',category:'LCD Screen',models:'Galaxy A11',year:2020,stock:12},
    {id:80,name:'Galaxy A11 Battery',category:'Battery',models:'Galaxy A11',year:2020,stock:16},
    {id:81,name:'Galaxy A21s Screen',category:'LCD Screen',models:'Galaxy A21s',year:2020,stock:12},
    {id:82,name:'Galaxy A21s Battery',category:'Battery',models:'Galaxy A21s',year:2020,stock:15},
    {id:83,name:'Galaxy A31 Screen',category:'LCD Screen',models:'Galaxy A31',year:2020,stock:10},
    {id:84,name:'Galaxy A31 Battery',category:'Battery',models:'Galaxy A31',year:2020,stock:13},
    {id:85,name:'Galaxy A51 Screen',category:'LCD Screen',models:'Galaxy A51',year:2020,stock:12},
    {id:86,name:'Galaxy A51 Battery',category:'Battery',models:'Galaxy A51',year:2020,stock:16},
    {id:87,name:'Galaxy A71 Screen',category:'LCD Screen',models:'Galaxy A71',year:2020,stock:9},
    {id:88,name:'Galaxy A71 Battery',category:'Battery',models:'Galaxy A71',year:2020,stock:12},

    {id:89,name:'Galaxy A12 Screen',category:'LCD Screen',models:'Galaxy A12',year:2021,stock:14},
    {id:90,name:'Galaxy A12 Battery',category:'Battery',models:'Galaxy A12',year:2021,stock:18},
    {id:91,name:'Galaxy A22 Screen',category:'LCD Screen',models:'Galaxy A22',year:2021,stock:11},
    {id:92,name:'Galaxy A22 Battery',category:'Battery',models:'Galaxy A22',year:2021,stock:14},
    {id:93,name:'Galaxy A32 Screen',category:'LCD Screen',models:'Galaxy A32',year:2021,stock:10},
    {id:94,name:'Galaxy A32 Battery',category:'Battery',models:'Galaxy A32',year:2021,stock:13},
    {id:95,name:'Galaxy A52 Screen',category:'LCD Screen',models:'Galaxy A52',year:2021,stock:10},
    {id:96,name:'Galaxy A52 Battery',category:'Battery',models:'Galaxy A52',year:2021,stock:14},
    {id:97,name:'Galaxy A72 Screen',category:'LCD Screen',models:'Galaxy A72',year:2021,stock:8},
    {id:98,name:'Galaxy A72 Battery',category:'Battery',models:'Galaxy A72',year:2021,stock:10},

    {id:99,name:'Galaxy A13 Screen',category:'LCD Screen',models:'Galaxy A13',year:2022,stock:14},
    {id:100,name:'Galaxy A13 Battery',category:'Battery',models:'Galaxy A13',year:2022,stock:18},
    {id:101,name:'Galaxy A23 Screen',category:'LCD Screen',models:'Galaxy A23',year:2022,stock:11},
    {id:102,name:'Galaxy A23 Battery',category:'Battery',models:'Galaxy A23',year:2022,stock:14},
    {id:103,name:'Galaxy A33 Screen',category:'LCD Screen',models:'Galaxy A33',year:2022,stock:10},
    {id:104,name:'Galaxy A33 Battery',category:'Battery',models:'Galaxy A33',year:2022,stock:13},
    {id:105,name:'Galaxy A53 Screen',category:'LCD Screen',models:'Galaxy A53',year:2022,stock:10},
    {id:106,name:'Galaxy A53 Battery',category:'Battery',models:'Galaxy A53',year:2022,stock:14},
    {id:107,name:'Galaxy A73 Screen',category:'LCD Screen',models:'Galaxy A73',year:2022,stock:8},
    {id:108,name:'Galaxy A73 Battery',category:'Battery',models:'Galaxy A73',year:2022,stock:10},

    {id:109,name:'Galaxy A14 Screen',category:'LCD Screen',models:'Galaxy A14',year:2023,stock:15},
    {id:110,name:'Galaxy A14 Battery',category:'Battery',models:'Galaxy A14',year:2023,stock:18},
    {id:111,name:'Galaxy A24 Screen',category:'LCD Screen',models:'Galaxy A24',year:2023,stock:12},
    {id:112,name:'Galaxy A24 Battery',category:'Battery',models:'Galaxy A24',year:2023,stock:16},
    {id:113,name:'Galaxy A34 Screen',category:'LCD Screen',models:'Galaxy A34',year:2023,stock:10},
    {id:114,name:'Galaxy A34 Battery',category:'Battery',models:'Galaxy A34',year:2023,stock:14},
    {id:115,name:'Galaxy A54 Screen',category:'LCD Screen',models:'Galaxy A54',year:2023,stock:12},
    {id:116,name:'Galaxy A54 Battery',category:'Battery',models:'Galaxy A54',year:2023,stock:16},

    {id:117,name:'Galaxy A15 Screen',category:'LCD Screen',models:'Galaxy A15',year:2024,stock:12},
    {id:118,name:'Galaxy A15 Battery',category:'Battery',models:'Galaxy A15',year:2024,stock:16},
    {id:119,name:'Galaxy A25 Screen',category:'LCD Screen',models:'Galaxy A25',year:2024,stock:10},
    {id:120,name:'Galaxy A25 Battery',category:'Battery',models:'Galaxy A25',year:2024,stock:14},
    {id:121,name:'Galaxy A35 Screen',category:'LCD Screen',models:'Galaxy A35',year:2024,stock:9},
    {id:122,name:'Galaxy A35 Battery',category:'Battery',models:'Galaxy A35',year:2024,stock:12},
    {id:123,name:'Galaxy A55 Screen',category:'LCD Screen',models:'Galaxy A55',year:2024,stock:8},
    {id:124,name:'Galaxy A55 Battery',category:'Battery',models:'Galaxy A55',year:2024,stock:12},

    // Laptops parts & accessories (common models)
    {id:125,name:'MacBook Air 13 (2020) Battery',category:'Battery',models:'MacBook Air 13 (2020)',year:2020,stock:10},
    {id:126,name:'MacBook Pro 16 (2021) Screen',category:'LCD Screen',models:'MacBook Pro 16 (2021)',year:2021,stock:6},
    {id:127,name:'MacBook Pro 14 (2023) Charger 96W',category:'Accessory',models:'USB-C (Apple)',year:2023,stock:12},
    {id:128,name:'MacBook Air 15 (2024) Battery',category:'Battery',models:'MacBook Air 15 (2024)',year:2024,stock:7},
    {id:129,name:'Dell XPS 13 Keyboard',category:'Accessory',models:'XPS 13 (9310/9320)',year:2021,stock:9},
    {id:130,name:'Dell XPS 15 Battery',category:'Battery',models:'XPS 15 (9500/9510)',year:2022,stock:8},
    {id:131,name:'HP Spectre x360 14 Screen',category:'LCD Screen',models:'Spectre x360 14',year:2023,stock:7},
    {id:132,name:'Lenovo ThinkPad T14 Battery',category:'Battery',models:'ThinkPad T14/T14s',year:2022,stock:10},
    {id:133,name:'ThinkPad X1 Carbon Gen 11 Screen',category:'LCD Screen',models:'X1 Carbon Gen 11',year:2024,stock:5},
    {id:134,name:'Asus ROG Zephyrus G14 Battery',category:'Battery',models:'ROG Zephyrus G14',year:2023,stock:8},
    {id:135,name:'Acer Swift 3 Battery',category:'Battery',models:'Swift 3',year:2022,stock:10},
    {id:136,name:'Surface Laptop 5 Screen',category:'LCD Screen',models:'Surface Laptop 5',year:2022,stock:6},
    {id:137,name:'Surface Pro 9 Battery',category:'Battery',models:'Surface Pro 9',year:2022,stock:7},
    {id:138,name:'65W USB-C Laptop Charger',category:'Accessory',models:'Universal USB-C',year:2023,stock:25},
    {id:139,name:'Dell 130W Barrel Charger',category:'Accessory',models:'Dell XPS/Latitude',year:2020,stock:8},
    {id:140,name:'Lenovo 65W USB-C Charger',category:'Accessory',models:'ThinkPad/IdeaPad',year:2022,stock:16},
    {id:141,name:'Universal Laptop DC Jack Kit',category:'Charging Port',models:'Various laptops',year:2024,stock:10},

    // Additional Laptops (MacBook, Dell, HP, Lenovo, Asus, Acer, Microsoft)
    {id:142,name:'MacBook Pro 16 (2019) Battery',category:'Battery',models:'MacBook Pro 16 (2019)',year:2019,stock:6},
    {id:143,name:'MacBook Pro 13 (2020) Screen',category:'LCD Screen',models:'MacBook Pro 13 (2020)',year:2020,stock:5},
    {id:144,name:'MacBook Air 13 (2022) Keyboard',category:'Accessory',models:'MacBook Air 13 (2022)',year:2022,stock:8},
    {id:145,name:'MacBook Pro 14 (2024) Battery',category:'Battery',models:'MacBook Pro 14 (2024)',year:2024,stock:7},
    {id:146,name:'MacBook Pro 16 (2024) Screen',category:'LCD Screen',models:'MacBook Pro 16 (2024)',year:2024,stock:4},

    {id:147,name:'Dell Inspiron 15 Battery',category:'Battery',models:'Inspiron 15 (3000/5000)',year:2021,stock:12},
    {id:148,name:'Dell Latitude 7440 Screen',category:'LCD Screen',models:'Latitude 7440',year:2023,stock:6},
    {id:149,name:'Alienware m15 Battery',category:'Battery',models:'Alienware m15',year:2020,stock:5},
    {id:150,name:'Dell XPS 17 Screen',category:'LCD Screen',models:'XPS 17 (9700/9710)',year:2021,stock:5},

    {id:151,name:'HP EliteBook 840 Battery',category:'Battery',models:'EliteBook 840 G7/G8',year:2021,stock:10},
    {id:152,name:'HP Pavilion 15 Screen',category:'LCD Screen',models:'Pavilion 15',year:2020,stock:9},
    {id:153,name:'HP Omen 16 Battery',category:'Battery',models:'Omen 16',year:2022,stock:6},
    {id:154,name:'HP Spectre x360 16 Screen',category:'LCD Screen',models:'Spectre x360 16',year:2023,stock:6},

    {id:155,name:'Lenovo ThinkPad T16 Battery',category:'Battery',models:'ThinkPad T16',year:2023,stock:9},
    {id:156,name:'Lenovo IdeaPad 5 14 Screen',category:'LCD Screen',models:'IdeaPad 5 14',year:2021,stock:8},
    {id:157,name:'Lenovo Legion 5 Battery',category:'Battery',models:'Legion 5/5i',year:2022,stock:7},
    {id:158,name:'Lenovo Yoga 7i 14 Screen',category:'LCD Screen',models:'Yoga 7i 14',year:2022,stock:7},

    {id:159,name:'Asus ROG Strix G15 Battery',category:'Battery',models:'ROG Strix G15',year:2021,stock:8},
    {id:160,name:'Asus Zephyrus G16 Screen',category:'LCD Screen',models:'ROG Zephyrus G16',year:2024,stock:5},
    {id:161,name:'Asus ZenBook 14 Battery',category:'Battery',models:'ZenBook 14',year:2022,stock:9},
    {id:162,name:'Asus VivoBook 15 Screen',category:'LCD Screen',models:'VivoBook 15',year:2021,stock:8},

    {id:163,name:'Acer Aspire 5 Battery',category:'Battery',models:'Aspire 5',year:2021,stock:10},
    {id:164,name:'Acer Nitro 5 Screen',category:'LCD Screen',models:'Nitro 5',year:2022,stock:7},
    {id:165,name:'Acer Predator Helios 16 Battery',category:'Battery',models:'Predator Helios 16',year:2024,stock:5},
    {id:166,name:'Acer Swift 5 Screen',category:'LCD Screen',models:'Swift 5',year:2022,stock:8},

    {id:167,name:'Surface Pro 8 Screen',category:'LCD Screen',models:'Surface Pro 8',year:2021,stock:6},
    {id:168,name:'Surface Go 3 Battery',category:'Battery',models:'Surface Go 3',year:2021,stock:7},
    {id:169,name:'Surface Laptop Studio Screen',category:'LCD Screen',models:'Surface Laptop Studio',year:2021,stock:5},
    {id:170,name:'Surface Laptop 5 Battery',category:'Battery',models:'Surface Laptop 5',year:2022,stock:7},

    // Tablets: iPad & Samsung Tab
    {id:171,name:'iPad Pro 12.9 (2021) Screen',category:'LCD Screen',models:'iPad Pro 12.9 (2021)',year:2021,stock:6},
    {id:172,name:'iPad Pro 11 (2024) Screen',category:'LCD Screen',models:'iPad Pro 11 (2024)',year:2024,stock:5},
    {id:173,name:'iPad Air (2024) Screen',category:'LCD Screen',models:'iPad Air (2024)',year:2024,stock:6},
    {id:174,name:'iPad (2024) Battery',category:'Battery',models:'iPad (2024)',year:2024,stock:8},
    {id:175,name:'Galaxy Tab S9 Ultra Screen',category:'LCD Screen',models:'Tab S9 Ultra',year:2023,stock:5},
    {id:176,name:'Galaxy Tab S8 Battery',category:'Battery',models:'Tab S8/S8+',year:2022,stock:8},
    {id:177,name:'Galaxy Tab S7 Charging Port',category:'Charging Port',models:'Tab S7/S7+',year:2020,stock:9},
    {id:178,name:'Galaxy Tab A8 Screen',category:'LCD Screen',models:'Tab A8',year:2021,stock:10}
  ];

  function load(){ try{ return JSON.parse(localStorage.getItem(KEY)||'[]'); }catch(_e){ return []; } }
  function save(data){ try{ localStorage.setItem(KEY, JSON.stringify(data)); }catch(_e){} }

  // Bump storage version to reseed with expanded dataset
  var inv = (function(){
    try{ if(localStorage.getItem('btl_inv_version')!=='3'){ localStorage.removeItem(KEY); localStorage.setItem('btl_inv_version','3'); } }catch(_e){}
    var d=load(); if(!Array.isArray(d) || d.length===0){ d=seed; save(d); }
    return d;
  })();

  var tbody=id('tbody');
  var q=id('q');
  var chips=document.getElementById('chips');
  var sort={col:'name',dir:'asc'};

  var CATEGORIES=['LCD Screen','Battery','Back Cover','Charging Port','Flex Cable','Accessory'];
  var TYPES=['Mobile','Tablet','Laptop','Watch','Accessory','Console','Other'];

  function detectType(it){
    var s=((it.name||'')+' '+(it.models||'')+' '+(it.category||'')).toLowerCase();
    if(s.indexOf('macbook')>=0 || s.indexOf('xps')>=0 || s.indexOf('thinkpad')>=0 || s.indexOf('spectre')>=0 || s.indexOf('legion')>=0 || s.indexOf('vivobook')>=0 || s.indexOf('zenbook')>=0 || s.indexOf('nitro')>=0 || s.indexOf('laptop')>=0) return 'Laptop';
    if(s.indexOf('ipad')>=0 || s.indexOf('tab ')>=0 || s.indexOf('galaxy tab')>=0 || s.indexOf('surface pro')>=0 || s.indexOf('surface go')>=0) return 'Tablet';
    if(s.indexOf('watch')>=0) return 'Watch';
    if(s.indexOf('console')>=0 || s.indexOf('switch')>=0) return 'Console';
    if(s.indexOf('charger')>=0 || s.indexOf('cable')>=0 || s.indexOf('protector')>=0 || s.indexOf('case')>=0 || s.indexOf('adapter')>=0) return 'Accessory';
    return 'Mobile';
  }

  function render(rows){
    tbody.innerHTML='';
    rows.forEach(function(it, idx){
      if(!it.deviceType){ it.deviceType = detectType(it); }
      var tr=document.createElement('tr');
      var stockClass = it.stock<10? 'stock-low' : (it.stock<20? 'stock-mid':'stock-high');
      var catClass = it.category.indexOf('LCD')===0? 'c-screen' : it.category.indexOf('Battery')===0? 'c-battery' : it.category.indexOf('Back Cover')===0? 'c-cover' : it.category.indexOf('Charging Port')===0? 'c-charging' : it.category.indexOf('Flex')===0? 'c-flex' : 'c-accessory';
      tr.innerHTML = ''
        + '<td><input data-k="name" value="'+escapeHtml(it.name)+'" style="width:250px"></td>'
        + '<td>'
        + '  <select data-k="category" class="category '+catClass+'" style="padding:6px 10px; border-radius:999px; border:1px solid #e2e8f0">'
        + CATEGORIES.map(function(c){ return '<option'+(c===it.category?' selected':'')+'>'+c+'</option>'; }).join('')
        + '  </select>'
        + '</td>'
        + '<td>'
        + '  <select data-k="deviceType" style="padding:6px 10px; border-radius:8px; border:1px solid #e2e8f0">'
        + TYPES.map(function(t){ return '<option'+(t===(it.deviceType||detectType(it))?' selected':'')+'>'+t+'</option>'; }).join('')
        + '  </select>'
        + '</td>'
        + '<td><input data-k="models" value="'+escapeHtml(it.models)+'" style="width:320px"></td>'
        + '<td class="right '+stockClass+'"><input data-k="stock" type="number" min="0" value="'+Number(it.stock)+'"></td>'
        + '<td class="right"><div style="display:flex; gap:6px; justify-content:flex-end;"><button class="btn-ghost" data-action="use">Use</button><button class="btn-ghost" data-action="dup">Duplicate</button><button class="btn-ghost" data-action="del">Delete</button></div></td>';
      tr.querySelector('[data-action="use"]').addEventListener('click', function(){
        var payload = { type:'btl-stock-select', item: inv[idx] };
        try{ window.opener && window.opener.postMessage(payload, '*'); }catch(_e){}
        try{ window.parent && window.parent.postMessage(payload, '*'); }catch(_e){}
      });
      tr.querySelectorAll('input').forEach(function(inp){
        inp.addEventListener('change', function(){
          var key=this.getAttribute('data-k');
          var val=(key==='name'||key==='models')? this.value : Number(this.value);
          inv[idx][key]=val; save(inv); compute();
        });
      });
      tr.querySelector('select[data-k="category"]').addEventListener('change', function(){ inv[idx].category=this.value; save(inv); compute(); });
      tr.querySelector('select[data-k="deviceType"]').addEventListener('change', function(){ inv[idx].deviceType=this.value; save(inv); compute(); });
      tr.querySelector('[data-action="dup"]').addEventListener('click', function(){ var nextId = (inv.reduce(function(m,it){ return Math.max(m, Number(it.id||0)); },0) + 1) || 1; var clone = JSON.parse(JSON.stringify(inv[idx])); clone.id=nextId; clone.name = clone.name + ' (Copy)'; inv.splice(idx+1,0,clone); save(inv); compute(); });
      tr.querySelector('[data-action="del"]').addEventListener('click', function(){ inv.splice(idx,1); save(inv); compute(); });
      tbody.appendChild(tr);
    });
    computeKpis(rows);
  }

  function escapeHtml(s){ return String(s).replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#039;'}[m]); }); }

  function compute(){
    var term=(q.value||'').toLowerCase();
    var activeCat = document.querySelector('.chip.active[data-filter]');
    var activeType = document.querySelector('.chip.active[data-type]');
    var rows = inv.map(function(it){ if(!it.deviceType){ it.deviceType = detectType(it); } return it; }).filter(function(it){
      var okCat = !activeCat || (activeCat && (activeCat.getAttribute('data-filter')==='all' || it.category===activeCat.getAttribute('data-filter')));
      var okType = !activeType || (it.deviceType===activeType.getAttribute('data-type'));
      var okSearch = !term || [it.name,it.models,it.category,it.deviceType].join(' ').toLowerCase().indexOf(term)>=0;
      return okCat && okType && okSearch;
    });
    rows.sort(function(a,b){ var A=a[sort.col], B=b[sort.col]; if(typeof A==='string'){ A=A.toLowerCase(); B=B.toLowerCase(); } if(A<B) return sort.dir==='asc'? -1:1; if(A>B) return sort.dir==='asc'? 1:-1; return 0; });
    render(rows);
  }

  function computeKpis(rows){
    var units=0, low=0, cats={};
    rows.forEach(function(it){ units+=Number(it.stock||0); if(Number(it.stock||0)<10) low++; cats[it.category]=true; });
    id('kpiUnits').textContent = units;
    id('kpiLow').textContent = low;
    id('kpiCats').textContent = Object.keys(cats).length;
    id('kpiSkus').textContent = rows.length;
  }

  // Interactions
  q.addEventListener('input', compute);
  document.querySelectorAll('th[data-col]').forEach(function(th){ th.addEventListener('click', function(){ var col=this.getAttribute('data-col'); if(sort.col===col){ sort.dir = sort.dir==='asc'? 'desc':'asc'; } else { sort.col=col; sort.dir='asc'; } compute(); }); });
  chips.addEventListener('click', function(e){ var t=e.target.closest('.chip'); if(!t) return; if(t.hasAttribute('data-filter')){ document.querySelectorAll('.chip[data-filter]').forEach(function(x){ x.classList.remove('active'); }); t.classList.add('active'); } if(t.hasAttribute('data-type')){ document.querySelectorAll('.chip[data-type]').forEach(function(x){ x.classList.remove('active'); }); t.classList.add('active'); } compute(); });
  id('addItem').addEventListener('click', function(){ var nextId = (inv.reduce(function(m,it){ return Math.max(m, Number(it.id||0)); },0) + 1) || 1; inv.unshift({id:nextId,name:'New Part',category:'Accessory',deviceType:'Mobile',models:'',stock:0}); save(inv); compute(); });
  id('exportJson').addEventListener('click', function(){ var blob=new Blob([JSON.stringify(inv,null,2)],{type:'application/json'}); var url=URL.createObjectURL(blob); var a=document.createElement('a'); a.href=url; a.download='btltech-inventory.json'; a.click(); URL.revokeObjectURL(url); });
  id('importJsonBtn').addEventListener('click', function(){ id('importJson').click(); });
  id('importJson').addEventListener('change', function(e){ var f=e.target.files && e.target.files[0]; if(!f) return; var r=new FileReader(); r.onload=function(){ try{ var data=JSON.parse(String(r.result||'{}')); if(Array.isArray(data)){ inv=data; save(inv); compute(); } }catch(_e){} }; r.readAsText(f); });
  id('clearAll').addEventListener('click', function(){ if(confirm('Clear local inventory?')){ localStorage.removeItem(KEY); inv=seed.slice(); save(inv); compute(); } });
  id('quickAdd').addEventListener('click', function(){
    try{
      var cat = prompt('Part Category (LCD Screen, Battery, Back Cover, Charging Port, Flex Cable, Accessory):','LCD Screen');
      if(!cat) return; if(CATEGORIES.indexOf(cat)<0){ alert('Unknown category'); return; }
      var name = prompt('Part name:',''); if(!name){ return; }
      var models = prompt('Compatible models:',''); if(models==null){ return; }
      var dtype = prompt('Device Type (Mobile, Tablet, Laptop, Watch, Accessory, Console, Other):','Mobile'); if(dtype==null) return; if(TYPES.indexOf(dtype)<0){ alert('Unknown device type'); return; }
      var stock = prompt('Initial stock (number):','0'); if(stock==null) return; stock = Math.max(0, Number(stock)||0);
      var nextId = (inv.reduce(function(m,it){ return Math.max(m, Number(it.id||0)); },0) + 1) || 1;
      inv.unshift({id:nextId,name:name,category:cat,deviceType:dtype,models:models,stock:stock});
      save(inv); compute();
    }catch(_e){}
  });

  // Initial paint
  compute();
  </script>
</body>
</html>


