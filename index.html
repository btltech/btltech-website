<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Basic Meta Tags -->
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Phone & Laptop Repairs in Acton Vale, W3 | Fast, Reliable Service – BTLTech Ltd</title>
  <meta name="description" content="Expert phone, laptop, tablet & console repairs in Acton Vale. Same-day service, quality parts, free diagnostics. Book online or WhatsApp today!"/>
  <meta name="keywords" content="phone repair Acton Vale, laptop repair Acton, tablet repair W3, console repair West London, data recovery Acton, phone repair near me, laptop repair near me, tablet repair near me, console repair near me, BTLTech, Acton Vale repairs, West London repairs, W3 repairs, Acton phone repair, Acton laptop repair, Acton tablet repair, Acton console repair, Acton data recovery, West London phone repair, West London laptop repair, West London tablet repair, West London console repair, West London data recovery, Acton Vale phone repair, Acton Vale laptop repair, Acton Vale tablet repair, Acton Vale console repair, Acton Vale data recovery, W3 phone repair, W3 laptop repair, W3 tablet repair, W3 console repair, W3 data recovery"/>
  <meta name="author" content="BTLTech Ltd"/>
  
  <!-- Geographic Meta Tags for Local SEO -->
  <meta name="geo.region" content="GB-LND"/>
  <meta name="geo.placename" content="Acton Vale, London"/>
  <meta name="geo.position" content="51.5074;-0.1278"/>
  <meta name="ICBM" content="51.5074, -0.1278"/>
  
  <!-- Open Graph Meta Tags for Social Media Sharing -->
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://btltech.co.uk/"/>
  <meta property="og:title" content="BTLTech Ltd – Phone & Computer Repairs in Acton Vale, W3"/>
  <meta property="og:description" content="Fast, professional phone, tablet, laptop & console repairs in Acton Vale. Expert data recovery & accessories. Book online or WhatsApp today."/>
  <meta property="og:image" content="https://btltech.co.uk/btltech-logo-192.png"/>
  
  <!-- Twitter Card Meta Tags -->
  <meta property="twitter:card" content="summary_large_image"/>
  <meta property="twitter:url" content="https://btltech.co.uk/"/>
  <meta property="twitter:title" content="BTLTech Ltd – Phone & Computer Repairs in Acton Vale, W3"/>
  <meta property="twitter:description" content="Fast, professional phone, tablet, laptop & console repairs in Acton Vale. Expert data recovery & accessories. Book online or WhatsApp today."/>
  <meta property="twitter:image" content="https://btltech.co.uk/btltech-logo-192.png"/>
  
  <!-- Favicon and App Icons -->
  <link rel="icon" href="favicon.ico"/>
  <link rel="apple-touch-icon" href="btltech-logo-192.png"/>
  <link rel="sitemap" type="application/xml" title="Sitemap" href="sitemap.xml"/>
  <link rel="canonical" href="https://btltech.co.uk/" />
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json"/>
  
  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#1e3a8a"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="default"/>
  <meta name="apple-mobile-web-app-title" content="BTLTech"/>
  <meta name="msapplication-TileColor" content="#1e3a8a"/>
  <meta name="msapplication-tap-highlight" content="no"/>
  
  <!-- External Stylesheets and Scripts -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link rel="stylesheet" href="styles.css"/>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v2.8.0/dist/cookieconsent.css"/>
  <script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v2.8.0/dist/cookieconsent.js"></script>
  <script src="cookie-consent.js"></script>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-S2RMZGJHLD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-S2RMZGJHLD');
  </script>

  <!-- Google Search Console Verification -->
  <meta name="google-site-verification" content="PENDING_VERIFICATION" />

  <!-- LocalBusiness Schema for SEO -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"LocalBusiness",
    "@id":"https://btltech.co.uk/#btltech",
    "name":"BTLTech Ltd",
    "image":"https://btltech.co.uk/btltech-logo-192.png",
    "url":"https://btltech.co.uk/",
    "telephone":"+44 20 8746 0193",
    "email":"info@btltech.co.uk",
    "address":{"@type":"PostalAddress","streetAddress":"161 The Vale","addressLocality":"Acton","addressRegion":"London","postalCode":"W3 7RD","addressCountry":"GB"},
    "geo":{"@type":"GeoCoordinates","latitude":51.5074,"longitude":-0.1278},
    "openingHoursSpecification":[{"@type":"OpeningHoursSpecification","dayOfWeek":["Monday","Tuesday","Wednesday","Thursday","Friday"],"opens":"10:00","closes":"19:00"},{"@type":"OpeningHoursSpecification","dayOfWeek":"Saturday","opens":"13:00","closes":"17:00"}],
    "sameAs":["https://wa.me/447445363599"],
    "priceRange":"££",
    "potentialAction":{
      "@type":"ReserveAction",
      "target":{
        "@type":"EntryPoint",
        "urlTemplate":"https://btltech.co.uk/book.html",
        "actionPlatform":["http://schema.org/DesktopWebPlatform","http://schema.org/MobileWebPlatform"]
      },
      "result":{
        "@type":"Reservation",
        "name":"Repair Service Booking"
      }
    },
    "hasOfferCatalog":{
      "@type":"OfferCatalog",
      "name":"Repair Services",
      "itemListElement":[
        {
          "@type":"Offer",
          "itemOffered":{"@type":"Service","name":"Phone Repair","description":"Screen, battery, charging port repairs for all major brands"}
        },
        {
          "@type":"Offer",
          "itemOffered":{"@type":"Service","name":"Laptop Repair","description":"Screen, keyboard, overheating, and boot issues fixed"}
        },
        {
          "@type":"Offer",
          "itemOffered":{"@type":"Service","name":"Tablet Repair","description":"iPad and Android tablets serviced with quality parts"}
        },
        {
          "@type":"Offer",
          "itemOffered":{"@type":"Service","name":"Console Repair","description":"PlayStation, Xbox, Nintendo diagnostics and fixes"}
        }
      ]
    }
  }
  </script>
</head>
<body class="bg-gray-50 text-gray-900">

<!-- TOP BAR: Contact Information -->
<div class="w-full bg-blue-950 text-white text-sm">
  <div class="container mx-auto px-4 py-2 flex flex-col md:flex-row items-center justify-between gap-2">
    <!-- Business Address -->
    <div>
      <a href="https://www.google.com/maps/place/BTLTech+Ltd/@51.509942,-0.258805,17z/data=!3m1!4b1!4m6!3m5!1s0x48760e6d33323ded:0x23622be085a83e0!8m2!3d51.509942!4d-0.258805!16s%2Fg%2F11h3f_0y1l?entry=ttu" target="_blank" rel="noopener" aria-label="View our address on Google Maps">
        <i class="fa-solid fa-location-dot mr-1" aria-hidden="true"></i>
        161 The Vale, Acton, London W3 7RD
      </a>
    </div>
    
    <!-- Contact Methods -->
    <div class="flex items-center gap-3">
      <a href="mailto:info@btltech.co.uk" class="hover:underline" aria-label="Email us at info@btltech.co.uk">
        <i class="fa-solid fa-at mr-1" aria-hidden="true"></i>info@btltech.co.uk
      </a>
      <a href="tel:+442087460193" class="hover:underline" aria-label="Call us at 020 8746 0193">
        <i class="fa-solid fa-phone mr-1" aria-hidden="true"></i>020 8746 0193
      </a>
      <a href="tel:+447445363599" class="hover:underline" aria-label="Call us at 07445 363 599">
        <i class="fa-solid fa-mobile-screen mr-1" aria-hidden="true"></i>07445 363 599
      </a>
      <a class="bg-green-600 px-3 py-1 rounded hover:bg-green-700 transition" 
         href="https://wa.me/447445363599" 
         target="_blank" 
         rel="noopener"
         aria-label="Message us on WhatsApp">
        <i class="fa-brands fa-whatsapp mr-1" aria-hidden="true"></i>WhatsApp
      </a>
    </div>
  </div>
</div>

<!-- HEADER: Navigation -->
<header class="sticky top-0 z-50 bg-white shadow-sm">
  <div class="container mx-auto px-4 py-3 flex items-center justify-between">
    <!-- Logo and Brand -->
    <a href="index.html" class="flex items-center gap-4">
      <img src="btltech-logo-192.png" 
           alt="BTLTech logo" 
           class="w-20 h-20 logo-img"/>
      <span class="brand-text">BTLTech Ltd</span>
    </a>
    
    <!-- Desktop Navigation -->
    <nav class="hidden md:flex gap-6 text-sm font-medium" role="navigation" aria-label="Main navigation">
      <a href="index.html" class="text-blue-600" aria-current="page">Home</a>
      <a href="repairs.html">Repairs</a>
      <a href="data-recovery.html">Data Recovery</a>
      <a href="faq.html">FAQ</a>
      <a href="book.html">Book</a>
      <a href="contact.html">Contact</a>
    </nav>
    
    <!-- Mobile Menu Toggle -->
    <button id="menuBtn" 
            class="md:hidden w-12 h-12 border rounded-lg flex items-center justify-center hover:bg-gray-100" 
            aria-label="Toggle mobile menu" 
            aria-expanded="false">
      <i class="fa-solid fa-bars"></i>
    </button>
  </div>
  
  <!-- Mobile Navigation Menu -->
  <div id="mobileMenu" class="hidden md:hidden bg-white border-t">
    <div class="container mx-auto px-4 py-3 grid grid-cols-2 gap-3 text-sm">
      <a href="index.html" aria-current="page">Home</a>
      <a href="repairs.html">Repairs</a>
      <a href="data-recovery.html">Data Recovery</a>
      <a href="faq.html">FAQ</a>
      <a href="book.html">Book</a>
      <a href="contact.html">Contact</a>
    </div>
  </div>
</header>

<!-- BREADCRUMB NAVIGATION -->
<div class="container mx-auto px-4">
  <nav class="breadcrumb" aria-label="Breadcrumb">
    <a href="index.html">Home</a>
  </nav>
</div>

<!-- HERO: Main Call-to-Action -->
<section class="hero-overlay container mx-auto px-4 py-16 md:py-24 grid md:grid-cols-2 gap-10 items-center">
  <div>
    <h1 class="text-4xl md:text-5xl font-extrabold">
      Fast, Professional Repairs in <span class="text-blue-600">Acton Vale</span>
    </h1>
    <p class="mt-5 text-lg text-gray-600">
      Phones, tablets, laptops, consoles & expert data recovery. Fast turnaround when parts are available.
    </p>
    
    <!-- Trust Indicators -->
    <div class="mt-6 flex flex-wrap gap-4 text-sm text-gray-600">
      <div class="flex items-center gap-1">
        <i class="fa-solid fa-tools text-green-600"></i>
        <span>Expert Technicians</span>
      </div>
      <div class="flex items-center gap-1">
        <i class="fa-solid fa-clock text-blue-600"></i>
        <span>Same Day Service*</span>
      </div>
      <div class="flex items-center gap-1">
        <i class="fa-solid fa-shield-halved text-purple-600"></i>
        <span>Warranty Protected</span>
      </div>
    </div>
    <p class="text-xs text-gray-500 mt-2">*Same day service subject to parts availability</p>
    
    <!-- Action Buttons -->
    <div class="mt-6 flex flex-col sm:flex-row gap-3">
      <a href="book.html" 
         class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2"
         aria-label="Book a repair appointment">
        <i class="fa-solid fa-calendar-check" aria-hidden="true"></i>
        Book a Repair
      </a>
      <a href="https://wa.me/447445363599" 
         class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2" 
         target="_blank" 
         rel="noopener"
         aria-label="Message us on WhatsApp">
        <i class="fa-brands fa-whatsapp" aria-hidden="true"></i>
        WhatsApp Us
      </a>
    </div>
  </div>
  <img src="hero-repair.jpeg" 
       alt="Professional repair service at BTLTech" 
       class="w-full rounded-xl shadow-lg" 
       loading="lazy"/>
</section>

<!-- QUICK SEARCH -->
<section class="py-12 bg-white">
  <div class="container mx-auto px-4">
    <div class="max-w-2xl mx-auto text-center">
      <h2 class="text-2xl font-bold mb-4">Find Your Repair Service</h2>
      <div class="search-container mx-auto">
        <i class="fa-solid fa-search search-icon"></i>
        <input type="text" 
               id="serviceSearch" 
               class="search-input" 
               placeholder="Search for phone repair, laptop screen, data recovery..."
               aria-label="Search for repair services">
      </div>
      <div id="searchResults" class="mt-4 text-left hidden"></div>
    </div>
  </div>
</section>

<!-- SERVICES OVERVIEW: Service Categories -->
<section class="bg-gray-50 py-16">
  <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-center mb-12">Our Services</h2>
    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
      <!-- Phone Repairs -->
      <div class="text-center p-6 bg-white rounded-lg shadow-sm">
        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fa-solid fa-mobile-screen text-2xl text-blue-600"></i>
        </div>
        <h3 class="font-semibold mb-2">Phone Repairs</h3>
        <p class="text-sm text-gray-600">Screen, battery, charging port repairs for all major brands</p>
      </div>
      
      <!-- Laptop Repairs -->
      <div class="text-center p-6 bg-white rounded-lg shadow-sm">
        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fa-solid fa-laptop text-2xl text-green-600"></i>
        </div>
        <h3 class="font-semibold mb-2">Laptop Repairs</h3>
        <p class="text-sm text-gray-600">Screen, keyboard, overheating, and boot issues fixed</p>
      </div>
      
      <!-- Tablet Repairs -->
      <div class="text-center p-6 bg-white rounded-lg shadow-sm">
        <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fa-solid fa-tablet text-2xl text-purple-600"></i>
        </div>
        <h3 class="font-semibold mb-2">Tablet Repairs</h3>
        <p class="text-sm text-gray-600">iPad and Android tablets serviced with quality parts</p>
      </div>
      
      <!-- Console Repairs -->
      <div class="text-center p-6 bg-white rounded-lg shadow-sm">
        <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <i class="fa-solid fa-gamepad text-2xl text-orange-600"></i>
        </div>
        <h3 class="font-semibold mb-2">Console Repairs</h3>
        <p class="text-sm text-gray-600">PlayStation, Xbox, Nintendo diagnostics and fixes</p>
      </div>
    </div>
  </div>
</section>

<!-- BOOKING OPTIONS: Multiple Ways to Book -->
<section class="py-16 bg-blue-50">
  <div class="container mx-auto px-4">
    <div class="max-w-4xl mx-auto text-center">
      <h2 class="text-3xl font-bold mb-4">Book Your Repair Today</h2>
      <p class="text-lg text-gray-600 mb-8">Choose your preferred booking method</p>
      
      <div class="grid md:grid-cols-2 gap-6">
        <!-- Direct Booking Form -->
        <div class="bg-white p-6 rounded-lg shadow-lg border-2 border-green-100">
          <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="fa-solid fa-calendar-check text-xl text-green-600"></i>
          </div>
          <h3 class="text-xl font-bold mb-2">Online Form</h3>
          <p class="text-sm text-gray-600 mb-4">Fill out our detailed booking form with your repair requirements</p>
          <a href="book.html" 
             class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2">
            <i class="fa-solid fa-calendar-plus"></i>
            Book Online
          </a>
        </div>
        
        <!-- WhatsApp Booking -->
        <div class="bg-white p-6 rounded-lg shadow-lg border-2 border-green-100">
          <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="fa-brands fa-whatsapp text-xl text-green-600"></i>
          </div>
          <h3 class="text-xl font-bold mb-2">WhatsApp</h3>
          <p class="text-sm text-gray-600 mb-4">Quick chat booking for immediate assistance and support</p>
          <a href="https://wa.me/447445363599?text=Hi! I'd like to book a repair appointment." 
             target="_blank" 
             rel="noopener"
             class="w-full bg-green-500 text-white py-2 rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center gap-2">
            <i class="fa-brands fa-whatsapp"></i>
            WhatsApp Us
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- FOOTER: Site Information -->
<footer class="bg-gray-900 text-white text-sm py-6">
  <div class="container mx-auto px-4 grid md:grid-cols-3 gap-6 text-center md:text-left">
    <!-- Quick Links -->
    <div>
      <h3 class="font-semibold mb-2">Quick Links</h3>
      <p><a href="book.html" class="hover:underline">Book a Repair</a></p>
      <p><a href="warranty.html" class="hover:underline">Warranty Terms</a></p>
    </div>
    
    <!-- Contact Information -->
    <div>
      <h3 class="font-semibold mb-2">Contact Info</h3>
      <p>161 The Vale, Acton, London W3 7RD</p>
      <p>020 8746 0193 • 07445 363 599</p>
      <p>info@btltech.co.uk</p>
    </div>
    
    <!-- Business Hours -->
    <div>
      <h3 class="font-semibold mb-2">Opening Hours</h3>
      <p>Mon-Fri: 10:00 - 19:00</p>
      <p>Saturday: 13:00 - 17:00</p>
      <p>Sunday: Closed</p>
    </div>
  </div>
  
  <!-- Copyright -->
  <div class="text-center mt-6 border-t border-gray-700 pt-4">
    © <span id="year"></span> BTLTech Ltd
  </div>
</footer>

<!-- STICKY CTA BUTTON -->
<div class="sticky-cta" id="stickyCta">
  <button onclick="window.location.href='book.html'" aria-label="Book a repair now">
    <i class="fa-solid fa-calendar-check"></i>
    <span>Book Now</span>
  </button>
</div>

<!-- Tawk.to Live Chat Integration -->
<script type="text/javascript">
var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
(function(){
var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
s1.async=true;
s1.src='https://embed.tawk.to/68bd42afff0b1f192377f6cd/1j4hkovqa';
s1.charset='UTF-8';
s1.setAttribute('crossorigin','*');
s0.parentNode.insertBefore(s1,s0);
})();
</script>

<!-- JavaScript: Interactive Functionality -->
<script src="menu.js"></script>
<script>
// Update copyright year dynamically
document.getElementById('year').textContent = new Date().getFullYear();

// Sticky CTA Button - Show on scroll
const stickyCta = document.getElementById('stickyCta');
let lastScroll = 0;

window.addEventListener('scroll', () => {
  const currentScroll = window.pageYOffset;
  
  // Show button after scrolling down 300px
  if (currentScroll > 300) {
    stickyCta.classList.add('visible');
  } else {
    stickyCta.classList.remove('visible');
  }
  
  lastScroll = currentScroll;
});

// Search Functionality
const serviceSearch = document.getElementById('serviceSearch');
const searchResults = document.getElementById('searchResults');

const services = [
  { name: 'Phone Screen Repair', url: 'repairs.html#phone', category: 'Phone' },
  { name: 'Phone Battery Replacement', url: 'repairs.html#phone', category: 'Phone' },
  { name: 'Laptop Screen Replacement', url: 'repairs.html#laptop', category: 'Laptop' },
  { name: 'Laptop Keyboard Repair', url: 'repairs.html#laptop', category: 'Laptop' },
  { name: 'Tablet Screen Repair', url: 'repairs.html#tablet', category: 'Tablet' },
  { name: 'Console Repair', url: 'repairs.html#console', category: 'Console' },
  { name: 'Data Recovery', url: 'data-recovery.html', category: 'Data' },
  { name: 'iPhone Repair', url: 'repairs.html#phone', category: 'Phone' },
  { name: 'Samsung Repair', url: 'repairs.html#phone', category: 'Phone' },
  { name: 'MacBook Repair', url: 'repairs.html#laptop', category: 'Laptop' },
  { name: 'iPad Repair', url: 'repairs.html#tablet', category: 'Tablet' },
  { name: 'PlayStation Repair', url: 'repairs.html#console', category: 'Console' },
  { name: 'Xbox Repair', url: 'repairs.html#console', category: 'Console' }
];

serviceSearch?.addEventListener('input', (e) => {
  const query = e.target.value.toLowerCase().trim();
  
  if (query.length < 2) {
    searchResults.classList.add('hidden');
    return;
  }
  
  const filtered = services.filter(service => 
    service.name.toLowerCase().includes(query) || 
    service.category.toLowerCase().includes(query)
  );
  
  if (filtered.length > 0) {
    searchResults.innerHTML = `
      <div class="bg-white border rounded-lg shadow-lg p-4 max-h-80 overflow-y-auto">
        <div class="text-sm font-semibold text-gray-600 mb-2">Search Results:</div>
        ${filtered.map(service => `
          <a href="${service.url}" class="block p-3 hover:bg-gray-50 rounded-lg transition-colors">
            <div class="font-semibold text-blue-600">${service.name}</div>
            <div class="text-xs text-gray-500">${service.category}</div>
          </a>
        `).join('')}
      </div>
    `;
    searchResults.classList.remove('hidden');
  } else {
    searchResults.innerHTML = `
      <div class="bg-white border rounded-lg shadow-lg p-4">
        <div class="text-sm text-gray-600">No services found. Try "phone", "laptop", or "data recovery"</div>
      </div>
    `;
    searchResults.classList.remove('hidden');
  }
});

// Close search results when clicking outside
document.addEventListener('click', (e) => {
  if (!e.target.closest('.search-container') && !e.target.closest('#searchResults')) {
    searchResults?.classList.add('hidden');
  }
});

// Mobile Menu Animation
const menuBtn = document.getElementById('menuBtn');
const mobileMenu = document.getElementById('mobileMenu');

menuBtn?.addEventListener('click', () => {
  mobileMenu.classList.toggle('hidden');
  if (!mobileMenu.classList.contains('hidden')) {
    mobileMenu.classList.add('mobile-menu-enter');
  }
});

// PWA Service Worker Registration
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/service-worker.js')
      .then(registration => {
        console.log('BTLTech PWA: Service Worker registered successfully', registration);
        
        // Check for updates
        registration.addEventListener('updatefound', () => {
          const newWorker = registration.installing;
          newWorker.addEventListener('statechange', () => {
            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
              // New content is available, show update notification
              showUpdateNotification();
            }
          });
        });
      })
      .catch(error => {
        console.error('BTLTech PWA: Service Worker registration failed', error);
      });
  });
}

// PWA Install Prompt
let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
  console.log('BTLTech PWA: Install prompt triggered');
  e.preventDefault();
  deferredPrompt = e;
  showInstallButton();
});

// Show install button
function showInstallButton() {
  const installButton = document.createElement('button');
  installButton.innerHTML = '<i class="fa-solid fa-download mr-2"></i>Install App';
  installButton.className = 'fixed bottom-4 right-4 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-blue-700 transition-colors z-50';
  installButton.onclick = () => {
    if (deferredPrompt) {
      deferredPrompt.prompt();
      deferredPrompt.userChoice.then((choiceResult) => {
        if (choiceResult.outcome === 'accepted') {
          console.log('BTLTech PWA: User accepted install prompt');
        } else {
          console.log('BTLTech PWA: User dismissed install prompt');
        }
        deferredPrompt = null;
        installButton.remove();
      });
    }
  };
  document.body.appendChild(installButton);
  
  // Auto-hide after 10 seconds
  setTimeout(() => {
    if (installButton.parentNode) {
      installButton.remove();
    }
  }, 10000);
}

// Show update notification
function showUpdateNotification() {
  const updateNotification = document.createElement('div');
  updateNotification.innerHTML = `
    <div class="fixed top-4 right-4 bg-green-600 text-white p-4 rounded-lg shadow-lg z-50 max-w-sm">
      <div class="flex items-center gap-3">
        <i class="fa-solid fa-sync-alt"></i>
        <div>
          <div class="font-semibold">Update Available</div>
          <div class="text-sm">New features and improvements are ready!</div>
        </div>
        <button onclick="this.parentElement.parentElement.remove(); window.location.reload();" 
                class="bg-green-700 px-3 py-1 rounded text-sm hover:bg-green-800">
          Update
        </button>
      </div>
    </div>
  `;
  document.body.appendChild(updateNotification);
  
  // Auto-hide after 15 seconds
  setTimeout(() => {
    if (updateNotification.parentNode) {
      updateNotification.remove();
    }
  }, 15000);
}

// Handle app installation
window.addEventListener('appinstalled', () => {
  console.log('BTLTech PWA: App was installed successfully');
  // Track installation in analytics
  if (typeof gtag !== 'undefined') {
    gtag('event', 'pwa_install', {
      event_category: 'engagement',
      event_label: 'BTLTech PWA'
    });
  }
});

// Offline detection
window.addEventListener('online', () => {
  console.log('BTLTech PWA: Back online');
  // Show online notification
  showStatusNotification('You\'re back online!', 'success');
});

window.addEventListener('offline', () => {
  console.log('BTLTech PWA: Gone offline');
  // Show offline notification
  showStatusNotification('You\'re offline. Some features may be limited.', 'warning');
});

// Show status notification
function showStatusNotification(message, type) {
  const notification = document.createElement('div');
  const bgColor = type === 'success' ? 'bg-green-600' : 'bg-yellow-600';
  notification.innerHTML = `
    <div class="fixed top-4 left-4 ${bgColor} text-white p-3 rounded-lg shadow-lg z-50 max-w-sm">
      <div class="flex items-center gap-2">
        <i class="fa-solid fa-${type === 'success' ? 'check-circle' : 'exclamation-triangle'}"></i>
        <span>${message}</span>
      </div>
    </div>
  `;
  document.body.appendChild(notification);
  
  // Auto-hide after 5 seconds
  setTimeout(() => {
    if (notification.parentNode) {
      notification.remove();
    }
  }, 5000);
}
</script>
</body>
</html>